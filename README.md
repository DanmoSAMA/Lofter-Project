# Lofter-Project

 对Lofter的复刻

## 3月20日

### 完成情况

* 上午下午都在工训，中午一小会和晚上在做实习任务，晚上中间穿插了一次3km跑步

* 复刻了Lofter首页的顶部导航条和Header，并做了导航条的弹出框，右侧的Sidebar没做完，在本次提交后会继续做1小时左右（估计仍做不完）

* 在做弹出框的时候，如果设置dispaly:none，没还原出hover时弹框往下移动的过渡效果，遂选择用visibility:hidden，效果还不错；

* 复习了光标移入的伪类:focus，input的默认内容placeholder，学习如何修改其样式

### 问题&解决

* 在做Sidebar时，由于Lofter的图标字体不能被选中，想到用伪类::before来做，但是遇到了未知的问题，伪类不能生效，暂时没解决

解决：

>nth-of-type 选择元素的过程：1.在当前平级DOM结点中所有div标签的第n个； 2.类名是"xxx"。不要忽略第一条！

### 计划

* Flag：计划明天做完首页，并做一部分“发现”

### 知识

* 初学者写完整项目能实现就已不错，代码质量需要长期对基础知识的积累，看了高级语法不代表会用
* 写JS时不要全篇let，要适时用const
* 了解事件委托
* 静态资源（如img）的文件夹不用很多，一个就足够，图片文件命名语义化一些
* script标签的位置问题
* 伪类nth的用法，css选择器的匹配规则
* 响应式布局没有实现，如何多栏自适应
* 在2021年可以多尝试用Flex和Grid布局，之后学习用一下

## 3月21日
没课的一天，早上和下午都在做实习，傍晚出去吃饭1个半小时，回来后一直做实习到睡觉

### 完成情况

* 解决了昨天缩小页面就会导致侧边栏移动的问题
* 首页完成，包括fixed定位和返回顶部键
* 发现页静态基本完成
* 基本完成一个用户界面，点击首页的头像（大的）可进入，本次打算一共做两个
* 简单学了点Grid布局，但本次仍打算使用传统式布局
* 将jpg图片转化为ico图标

### 问题&解决

* 瀑布流和懒加载有小bug，刚刷新的时候图片全部叠在一起
* Github传不上去，git遇到了一点小情况，如果解决不了，可能要再开一个仓库试试
* 本地代码由于git的误操作被修改了，此时git reflog 然后git reset把代码恢复，虚惊一场
### 计划

* 明天想要解决瀑布流和懒加载的bug，想搞清楚懒加载
* 做完两个用户界面
* 打算开始接触level 1

### 知识
* 除了很重要的头部信息，JS大多写在</body>前
* 现阶段不考虑拆分JS文件



## 3月22日

### 完成情况

* 写完了两个用户界面
* 发现昨天瀑布流的bug是因为我最前面几个item的类名没写loaded，有点傻
* 进入level1，点击心变红
* 点击评论出现评论框，评论框带动画
* 打算做发现页的tab栏切换，写了`话题`和`标签`，使用了grid布局，剩下三个暂时不打算写了
* 时间不够，tab栏切换只做了上边按钮的效果，下边还没有做

### 问题&解决

* 做下拉评论框的时候没有提前想清楚，以为要修改评论框的bottom，使用绝对定位，但是绝对定位脱离文档流不会影响下边的元素，又花了大功夫写JS逻辑，最后发现不用绝对定位其实很简单，遂完成
* ~~不太清楚懒加载能不能事先display:none，加载时改为dispaly:block，继续学习中~~  经学习，懒加载和src有关，只要src格式正确，就会请求相应资源，所以需要把其他图片的src改为占位图片的src；当然display:none也不可少。
* grid真香

### 计划

* level1基本写完（不自量力



## 3月23日

### 完成情况

* 写完tab栏切换
* 添加了最下方的footer
* 点击图片放大
* 点击按钮出现发布动态框
* 把瀑布流改为响应式
* 完成用户主页的动态点击看详情

### 问题&解决

* 防抖函数的call和apply写错，改正
* 一开始不知道怎么使整个页面被灰色遮罩覆盖，了解了`filter`，但发现它不能满足需求；后来点击时修改z-index终于实现
* node刚入门，很多地方还很懵，刚刚尝试用node去访问index.html，但是css不加载，暂未解决

### 计划

* level2是陌生的领域，从明天开始学着搞
* 希望明天起码可以完成发送动态功能，node服务器搞起来
* 抽2~3个小时学数据库，能学一点是一点

### 感悟
* 真想了解后端以及前后端交互，但是现在不会就有点难受，感觉什么都不能自动化，全是手撕静态页面



## 3月24日
早上稍微写了点，下午满课，晚上继续写了会，然后学MongoDB

* 现在点击"文字"可以发动态
* 点击主页大头像可以进入用户界面1，再点动态的标题，可以查看动态详细内容
### 完成情况

* 学习使用.gitignore
* 将4空格缩进改为2空格缩进
* 搭建起node服务器
* 实现了真正发评论（发评论后首页更新）
* 晚上学习了mongodb，希望明天能把数据库搭起来

### 问题&解决

* 解决了昨天无法加载css和js的问题，不加载是因为我没有发请求
* 点击页面不能正常跳转，后发现href不应该再写相对路径，比如主页应该写href="/
* 使用.gitignore忽略node_modules文件，别人通过package.json上的依赖关系，可以自动下载node_modules

### 计划

* 希望明天把数据库搭起来
* ~~登录和搜索功能不知道能不能做~~

### 感悟
* 入门node.js还是蛮有成就感的



## 3月25日

一早上都是物理试验，下午和晚上在做任务

### 完成情况

* mongoDB和mongoose的视频看完，在自己的摸索之下，终于搭建起mongoDB数据库，现在发出的评论可以保存，不会因为服务器关闭而丢失了
* 完成了右上角的弹出框，为登录功能做准备
* 做好了登录界面，但是还没实现刷新就换背景图片

### 问题&解决

* 对于数据库，主要遇到了“如何发评论后把它存入数据库”，和“怎么把数据库中的数据调出来，加入数组，然后渲染在屏幕上”两个问题
* 向数据库中传数据，发现只有schema中规定的属性才能传进去
* 读取数据用find()方法，然后一个for循环就能搞定啦
* 做右上角弹出框时，不知道如何实现“点击周围空白区域关闭弹窗”，去SegmentFault上学习后搞定
* 想做刷新就换背景图片，却遇到引号问题，修改body.style.backgroundImage总是失败，暂时没解决

### 计划

* 登录和搜索，希望至少能完成一个功能
* 希望除了发动态，评论也能真正发出，还有存入数据库（看时间情况）
* 懒加载只做了一个，希望可以多做几个（看时间情况）
* 明天就是最后了，后天是一天工训，冲！！！



## 3月26日

今天是最后一天了，努力冲

### 完成情况

* 实现了登录页面刷新随机换背景图片
* 完成了简易版登录功能——第一次登录相当于注册，登上后服务器会把账号和密码保存在数据库里，第二次登录的时候只有密码正确才能跳到首页。

### 问题&解决

* 昨天背景图片的问题，是因为路径问题，当我把../改为/public后就解决了问题
* 不知道怎么实现登录，一开始构思的是，如果某一个id已经出现在数据库的集合内，就不再保存数据，如果没出现过就保存，为了解决该问题，先尝试：用find方法查找，如果找到了就不插入，失败；然后用update的upsert: true选项，实现了这个功能。
* 最后调整的时候，发现根本不需要用到update: true，只要用if判断一下就好了，就完成了简易登录功能。

### 计划

* 下午不知道能不能做搜索
* 学姐建议配置路由，把绝对路径改成相对路径，我考虑到这个工程量可能略大（之前才花时间把相对路径改为绝对路径...），而且该程序是跑在自己的电脑上，并未出现什么问题，所以把它的优先度降低了

